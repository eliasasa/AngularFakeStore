<div class="min-h checkout-body" [class.has-item]="isLogged && total > 0">
    @if (isLogged && total > 0) {
        <div class="checkout-steps">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="material-icons" [class.step]="currentStep === 0">
                <path fill="currentColor" d="M29.72 23.62h-1.53V22.1h-1.52v-1.53h-1.53v-3.04h-1.52v3.04H22.1v1.53h-1.53v1.52h-3.04v1.52h3.04v1.53h1.53v1.52h1.52v1.53h1.52v1.52h4.58v-1.52h1.52v-4.58h-1.52Zm0 4.57h-1.53v-1.52h-1.52v-1.53h-1.53v-1.52h1.53v1.52h1.52v1.53h1.53ZM25.14 9.91h1.53v7.62h-1.53Zm-1.52-3.05h1.52v3.05h-1.52ZM22.1 5.34h1.52v1.52H22.1Zm-1.53-1.53h1.53v1.53h-1.53Zm-3.04 15.24h1.52v1.52h-1.52Zm0-16.76h3.04v1.52h-3.04ZM9.91 20.57h7.62v1.53H9.91ZM16 12.95h1.53V16H16ZM9.91 25.14h7.62v1.53H9.91Zm1.52-7.61H16v1.52h-4.57ZM9.91.76h7.62v1.53H9.91Zm0 12.19h1.52V16H9.91ZM6.86 23.62h3.05v1.52H6.86Zm1.52-4.57h1.53v1.52H8.38ZM6.86 2.29h3.05v1.52H6.86Z"/><path fill="currentColor" d="M8.38 11.43h1.53V9.91h7.62v1.52h1.52v7.62h1.52V8.38h-1.52V6.86h-1.52V5.34H9.91v1.52H8.38v1.52H6.86v10.67h1.52zM5.33 22.1h1.53v1.52H5.33Zm0-18.29h1.53v1.53H5.33ZM3.81 20.57h1.52v1.53H3.81Zm0-15.23h1.52v1.52H3.81ZM2.29 17.53h1.52v3.04H2.29Zm0-10.67h1.52v3.05H2.29ZM.76 9.91h1.53v7.62H.76Z"/>
            </svg>

            <hr>

            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="material-icons" [class.step]="currentStep === 1">
                <path fill="currentColor" d="M30.48 16.765v-1.53h-1.53v-1.52h-1.52v-1.53h-1.52v3.05h-1.53v1.53h-1.52v-4.58h3.05v-1.52h-7.62v-1.52h-1.53v10.66H1.53v-4.57H0v10.67h1.53v-4.57h15.23v4.57h-6.09v-1.53H9.14v4.58h1.53v-1.53h9.14v1.53h1.53v-4.58h-1.53v1.53h-1.52v-13.72h3.05v6.1h1.52v1.52h7.62v6.1H32v-9.14z"/><path fill="currentColor" d="M27.43 24.375h-1.52v4.58h1.52v-1.53h3.05v-1.52h-3.05zm-6.09 4.58h4.57v1.52h-4.57Zm1.52-3.05h1.52v1.52h-1.52Zm-1.52-3.05h4.57v1.52h-4.57Zm-7.62-16.76v6.09h-1.53v1.53h3.05v-9.14h-3.05v1.52zm-4.58 0h3.05v1.52H9.14Zm0 10.67v-1.53h3.05v-1.52H9.14v-6.1H6.1v1.53h1.52v6.09H6.1v1.53zm0-13.72h3.05v1.53H9.14Zm-4.57 19.81h4.57v1.52H4.57ZM6.1 1.525h3.04v1.52H6.1Zm-1.53 27.43h4.57v1.52H4.57Zm1.53-3.05h1.52v1.52H6.1Zm-3.05-12.19H6.1v1.52H3.05Zm0-10.67H6.1v1.53H3.05Zm1.52 21.33H3.05v1.53H1.53v1.52h1.52v1.53h1.52zM3.05 6.095H6.1v1.52H3.05Zm-1.52 6.09v-6.09h1.52v-1.52H0v9.14h3.05v-1.53z"/>
            </svg>

            <hr>

            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" class="material-icons" [class.step]="currentStep === 2">
                <path fill="currentColor" d="M30.475 32V0h-3.05v1.53h1.52v28.95h-1.52V32zm-4.57-3.04h1.52v1.52h-1.52Zm0-27.43h1.52v1.52h-1.52Zm-1.53 25.9h1.53v1.53h-1.53Zm0-9.14h1.53v3.05h-1.53Zm0-4.57h1.53v1.52h-1.53Zm0-10.67h1.53v1.52h-1.53Zm-1.52 25.91h1.52v1.52h-1.52Zm0-16.77v-1.52h-1.52v1.52h-1.53v1.53h1.53v3.04h-1.53v1.53h1.53v3.05h-1.53v1.52h1.53v1.52h1.52v-1.52h1.52v-1.52h-1.52v-3.05h1.52v-1.53h-1.52v-3.04h1.52v-1.53zm0-10.66h1.52v1.52h-1.52Zm-1.52 28.95h1.52V32h-1.52Zm0-30.48h1.52v1.53h-1.52Zm-1.53 28.96h1.53v1.52h-1.53Zm0-27.43h1.53v1.52h-1.53Zm-1.52 25.9h1.52v1.53h-1.52Zm0-7.62h1.52v1.53h-1.52Zm0-6.09h1.52v3.04h-1.52Zm0-10.67h1.52v1.52h-1.52Zm-1.53 25.91h1.53v1.52h-1.53Zm0-27.43h1.53v1.52h-1.53Zm-1.52 28.95h1.52V32h-1.52Zm0-30.48h1.52v1.53h-1.52Zm-1.52 28.96h1.52v1.52h-1.52Zm0-27.43h1.52v1.52h-1.52Zm-1.53 25.9h1.53v1.53h-1.53Zm-1.52-4.57h4.57v1.52h-4.57Zm0-4.57h4.57v1.52h-4.57Zm0-4.57h4.57v1.52h-4.57Zm0-4.57h4.57v1.52h-4.57Zm1.52-6.1h1.53v1.52h-1.53Zm-1.52 25.91h1.52v1.52h-1.52Zm0-27.43h1.52v1.52h-1.52Zm-1.52 28.95h1.52V32h-1.52Zm0-30.48h1.52v1.53h-1.52Zm-1.53 28.96h1.53v1.52h-1.53Zm0-27.43h1.53v1.52h-1.53Zm-1.52 25.9h1.52v1.53h-1.52Zm0-6.09h3.05v3.04h-3.05Zm0-4.58h3.05v3.05h-3.05Zm0-4.57h3.05v3.05h-3.05Zm0-4.57h3.05v3.05h-3.05Zm0-4.57h1.52v1.52h-1.52Zm-1.53 25.91h1.53v1.52h-1.53Zm0-27.43h1.53v1.52h-1.53Zm-1.52 0h1.52V0h-3.04v32h3.04v-1.52h-1.52z"/>
            </svg>
        </div>

        {{total | number: '1.2-2'}}

        <div class="checkout-form">
            @if (currentStep === 0) {
                <h2>Dados pessoais</h2>
                <form [formGroup]="personalForm" class="checkout-input-area">
                    <div class="textInputWrapper">
                        <label for="name">Nome completo</label>
                        <input placeholder="Nome completo" type="text" id="name" formControlName="name" class="textInput"
                        [class.input-error]="
                            personalForm.get('name')?.invalid &&
                            personalForm.get('name')?.touched
                        ">
                    </div>

                    <div class="textInputWrapper">
                        <label for="email">E-mail</label>
                        <input placeholder="exemplo@dominio.com" type="email" formControlName="email" id="email" class="textInput"
                        [class.input-error]="
                            personalForm.get('email')?.invalid &&
                            personalForm.get('email')?.touched
                        ">
                    </div>

                    <div class="duo-input">
                        <div class="textInputWrapper">
                            <label for="cpf">CPF</label>
                            <input placeholder="XXX.XXX.XXX-XX" formControlName="cpf" type="text" id="cpf" class="textInput"
                            mask="000.000.000-00"
                            [class.input-error]="
                                personalForm.get('cpf')?.invalid &&
                                personalForm.get('cpf')?.touched
                            ">
                        </div>
                        <div class="textInputWrapper">
                            <label for="phone">Celular</label>
                            <input placeholder="(XX) 9XXXX-XXXX" type="text" id="phone" formControlName="phone" class="textInput"  
                            mask="(00) 00000-0000"
                            [class.input-error]="
                                personalForm.get('phone')?.invalid &&
                                personalForm.get('phone')?.touched
                            ">
                        </div>
                    </div> 
                    <div class="duo-input">
                        
                        <div class="textInputWrapper">
                            <label for="fname">Telefone fixo*</label>
                            <input placeholder="X-XXX-XXX-XXXX" type="text" id="phoneFix" class="textInput" mask="0-000-000-0000" formControlName="phoneFix">
                        </div>
                    </div>               
                </form>
            }

            @if (currentStep === 1) {
                <h2>Forma de envio</h2>
                <form class="checkout-input-area" [formGroup]="addressForm">
                    <div class="textInputWrapper">
                        <label for="cep">CEP</label>
                        <input placeholder="XXXXX-XXXX" mask="00000-0000" formControlName="cep" type="text" id="cep" class="textInput">
                    </div>
                    <div class="frete-options"  
                    [class.frete-error]="
                        addressForm.get('frete')?.invalid &&
                        addressForm.get('frete')?.touched
                    ">
                        <label class="frete-option">
                            <input type="radio" name="frete" value="PAC" formControlName="frete"/>
                            <img src="assets/images/fretes/correios.png" alt="PAC" />
                            <div>
                            <strong>PAC</strong>
                            <small>Entrega em 5–7 dias úteis</small>
                            </div>
                            <span class="price">R$ 19,90</span>
                        </label>

                        <label class="frete-option">
                            <input type="radio" name="frete" value="JADLOG" formControlName="frete"/>
                            <img src="assets/images/fretes/jadlog.png" alt="Jadlog" />
                            <div>
                                <strong>Jadlog</strong>
                                <small>Entrega em 3–5 dias úteis</small>
                            </div>
                            <span class="price">R$ 24,90</span>
                        </label>   

                        <label class="frete-option">
                            <input type="radio" name="frete" value="SEDEX" formControlName="frete"/>
                            <img src="assets/images/fretes/correios.png" alt="Sedex" />
                            <div>
                            <strong>Sedex</strong>
                            <small>Entrega em 2–3 dias úteis</small>
                            </div>
                            <span class="price">R$ 29,90</span>
                        </label>

                        <label class="frete-option">
                            <input type="radio" name="frete" value="LOGGI" formControlName="frete"/>
                            <img src="assets/images/fretes/loggi.png" alt="Loggi" />
                            <div>
                                <strong>Loggi Express</strong>
                                <span class="badge">Mais rápido</span>
                                <small>Entrega em 1–2 dias úteis</small>
                            </div>
                            <span class="price">R$ 34,90</span>
                        </label>

                        <span class="span-frete" [class.frete-error]="
                            addressForm.get('frete')?.invalid &&
                            addressForm.get('frete')?.touched
                            ">
                            Selecione um dos fretes!
                        </span>
                         
                    </div>

                    <div class="duo-input address">
                        <div class="textInputWrapper">
                            <label for="address">Endereço</label>
                            <input placeholder="Endereço" type="text" id="address" class="textInput" formControlName="address"
                            [class.input-error]="
                                addressForm.get('address')?.invalid &&
                                addressForm.get('address')?.touched
                            ">
                        </div>
                        <div class="textInputWrapper">
                            <label for="number">Número</label>
                            <input placeholder="Número" type="number" id="number" formControlName="number" class="textInput"
                            [class.input-error]="
                                addressForm.get('number')?.invalid &&
                                addressForm.get('number')?.touched
                            ">
                        </div>
                    </div> 

                    <div class="duo-input">
                        <div class="textInputWrapper">
                            <label for="complement">Complemento*</label>
                            <input placeholder="Complemento" type="text" id="complement" class="textInput">
                        </div>
                        <div class="textInputWrapper">
                            <label for="bairro">Bairro</label>
                            <input placeholder="Bairro" type="text" id="bairro" class="textInput" formControlName="bairro"
                            [class.input-error]="
                                addressForm.get('bairro')?.invalid &&
                                addressForm.get('bairro')?.touched
                            ">
                        </div>
                    </div> 

                    <div class="duo-input">
                        <div class="textInputWrapper">
                            <label for="city">Cidade</label>
                            <input placeholder="Cidade" formControlName="city" type="text" id="city" class="textInput"
                            [class.input-error]="
                                addressForm.get('city')?.invalid &&
                                addressForm.get('city')?.touched
                            ">
                        </div>
                        <div class="textInputWrapper">
                            <label for="state">Estado</label>
                            <input placeholder="Estado" type="text" id="state" class="textInput" formControlName="state"
                            [class.input-error]="
                                addressForm.get('state')?.invalid &&
                                addressForm.get('state')?.touched
                            ">
                        </div>
                    </div> 
                </form>
                

            }

            @if (currentStep === 2) {
                <h2>Forma de pagamento</h2>
                <form [formGroup]="paymentForm" class="payment-container">

                    <!-- RADIOS -->
                    <div class="payment-options">
                        <label class="payment-option">
                        <input
                            type="radio"
                            value="PIX"
                            formControlName="paymentMethod"
                        />
                        <strong>Pix</strong>
                        <span class="badge">Instantâneo</span>
                        </label>

                        <label class="payment-option">
                        <input
                            type="radio"
                            value="CARD"
                            formControlName="paymentMethod"
                        />
                        <strong>Cartão de crédito</strong>
                        </label>
                    </div>

                    <!-- PIX -->
                    @if (paymentMethod === 'PIX') {
                        <div class="payment-content pix">

                        <p>Escaneie o QR Code ou gere um novo Pix</p>

                        <button
                            type="button"
                            class="btn-primary"
                            (click)="generatePixQr()"
                        >
                            Gerar QR Code
                        </button>

                        @if (pixQrCode) {
                            <img [src]="pixQrCode" alt="QR Code Pix" />
                        }

                        </div>
                    }

                    <!-- CARTÃO -->
                    @else if (paymentMethod === 'CARD') {
                        <div class="payment-content card">

                            <!-- From Uiverse.io by Praashoo7 --> 
                            <div class="flip-card">
                                <div class="flip-card-inner" [class.flip-active]="isCvvFocused">
                                    <div class="flip-card-front">
                                        <p class="heading_8264">CARTÃO DE CRÉDITO</p>
                                        
                                        <svg version="1.1" class="chip" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="30px" height="30px" viewBox="0 0 50 50" xml:space="preserve">  <image id="image0" width="50" height="50" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                                        AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB6VBMVEUAAACNcTiVeUKVeUOY
                                        fEaafEeUeUSYfEWZfEaykleyklaXe0SWekSZZjOYfEWYe0WXfUWXe0WcgEicfkiXe0SVekSXekSW
                                        ekKYe0a9nF67m12ZfUWUeEaXfESVekOdgEmVeUWWekSniU+VeUKVeUOrjFKYfEWliE6WeESZe0GS
                                        e0WYfES7ml2Xe0WXeESUeEOWfEWcf0eWfESXe0SXfEWYekSVeUKXfEWxklawkVaZfEWWekOUekOW
                                        ekSYfESZe0eXekWYfEWZe0WZe0eVeUSWeETAnmDCoWLJpmbxy4P1zoXwyoLIpWbjvXjivnjgu3bf
                                        u3beunWvkFWxkle/nmDivXiWekTnwXvkwHrCoWOuj1SXe0TEo2TDo2PlwHratnKZfEbQrWvPrWua
                                        fUfbt3PJp2agg0v0zYX0zYSfgkvKp2frxX7mwHrlv3rsxn/yzIPgvHfduXWXe0XuyIDzzISsjVO1
                                        lVm0lFitjVPzzIPqxX7duna0lVncuHTLqGjvyIHeuXXxyYGZfUayk1iyk1e2lln1zYTEomO2llrb
                                        tnOafkjFpGSbfkfZtXLhvHfkv3nqxH3mwXujhU3KqWizlFilh06khk2fgkqsjlPHpWXJp2erjVOh
                                        g0yWe0SliE+XekShhEvAn2D///+gx8TWAAAARnRSTlMACVCTtsRl7Pv7+vxkBab7pZv5+ZlL/UnU
                                        /f3SJCVe+Fx39naA9/75XSMh0/3SSkia+pil/KRj7Pr662JPkrbP7OLQ0JFOijI1MwAAAAFiS0dE
                                        orDd34wAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IDx2lsiuJAAACLElEQVRIx2Ng
                                        GAXkAUYmZhZWPICFmYkRVQcbOwenmzse4MbFzc6DpIGXj8PD04sA8PbhF+CFaxEU8iWkAQT8hEVg
                                        OkTF/InR4eUVICYO1SIhCRMLDAoKDvFDVhUaEhwUFAjjSUlDdMiEhcOEItzdI6OiYxA6YqODIt3d
                                        I2DcuDBZsBY5eVTr4xMSYcyk5BRUOXkFsBZFJTQnp6alQxgZmVloUkrKYC0qqmji2WE5EEZuWB6a
                                        lKoKdi35YQUQRkFYPpFaCouKIYzi6EDitJSUlsGY5RWVRGjJLyxNy4ZxqtIqqvOxaVELQwZFZdkI
                                        JVU1RSiSalAt6rUwUBdWG1CP6pT6gNqwOrgCdQyHNYR5YQFhDXj8MiK1IAeyN6aORiyBjByVTc0F
                                        qBoKWpqwRCVSgilOaY2OaUPw29qjOzqLvTAchpos47u6EZyYnngUSRwpuTe6D+6qaFQdOPNLRzOM
                                        1dzhRZyW+CZouHk3dWLXglFcFIflQhj9YWjJGlZcaKAVSvjyPrRQ0oQVKDAQHlYFYUwIm4gqExGm
                                        BSkutaVQJeomwViTJqPK6OhCy2Q9sQBk8cY0DxjTJw0lAQWK6cOKfgNhpKK7ZMpUeF3jPa28BCET
                                        amiEqJKM+X1gxvWXpoUjVIVPnwErw71nmpgiqiQGBjNzbgs3j1nus+fMndc+Cwm0T52/oNR9lsdC
                                        S24ra7Tq1cbWjpXV3sHRCb1idXZ0sGdltXNxRateRwHRAACYHutzk/2I5QAAACV0RVh0ZGF0ZTpj
                                        cmVhdGUAMjAyMy0wMi0xM1QwODoxNToyOSswMDowMEUnN7UAAAAldEVYdGRhdGU6bW9kaWZ5ADIw
                                        MjMtMDItMTNUMDg6MTU6MjkrMDA6MDA0eo8JAAAAKHRFWHRkYXRlOnRpbWVzdGFtcAAyMDIzLTAy
                                        LTEzVDA4OjE1OjI5KzAwOjAwY2+u1gAAAABJRU5ErkJggg=="></image>
                                        </svg>
                                        <svg version="1.1" class="contactless" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="20px" height="20px" viewBox="0 0 50 50" xml:space="preserve">  <image id="image0" width="50" height="50" x="0" y="0" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAQAAAC0NkA6AAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                                        AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAJcEhZ
                                        cwAACxMAAAsTAQCanBgAAAAHdElNRQfnAg0IEzgIwaKTAAADDklEQVRYw+1XS0iUURQ+f5qPyjQf
                                        lGRFEEFK76koKGxRbWyVVLSOgsCgwjZBJJYuKogSIoOonUK4q3U0WVBWFPZYiIE6kuArG3VGzK/F
                                        fPeMM/MLt99/NuHdfPd888/57jn3nvsQWWj/VcMlvMMd5KRTogqx9iCdIjUUmcGR9ImUYowyP3xN
                                        GQJoRLVaZ2DaZf8kyjEJALhI28ELioyiwC+Rc3QZwRYyO/DH51hQgWm6DMIh10KmD4u9O16K49it
                                        VoPOAmcGAWWOepXIRScAoJZ2Frro8oN+EyTT6lWkkg6msZfMSR35QTJmjU0g15tIGSJ08ZZMJkJk
                                        HpNZgSkyXosS13TkJpZ62mPIJvOSzC1bp8vRhhCakEk7G9/o4gmZdbpsTcKu0m63FbnBP9Qrc15z
                                        bkbemfgNDtEOI8NO5L5O9VYyRYgmJayZ9nPaxZrSjW4+F6Uw9yQqIiIZwhp2huQTf6OIvCZyGM6g
                                        DJBZbyXifJXr7FZjGXsdxADxI7HUJFB6iWvsIhFpkoiIiGTJfjJfiCuJg2ZEspq9EHGVpYgzKqwJ
                                        qSAOEwuJQ/pxPvE3cYltJCLdxBLiSKKIE5HxJKcTRNeadxfhDiuYw44zVs1dxKwRk/uCxIiQkxKB
                                        sSctRVAge9g1E15EHE6yRUaJecRxcWlukdRIbGFOSZCMWQA/iWauIP3slREHXPyliqBcrrD71Amz
                                        Z+rD1Mt2Yr8TZc/UR4/YtFnbijnHi3UrN9vKQ9rPaJf867ZiaqDB+czeKYmd3pNa6fuI75MiC0uX
                                        XSR5aEMf7s7a6r/PudVXkjFb/SsrCRfROk0Fx6+H1i9kkTGn/E1vEmt1m089fh+RKdQ5O+xNJPUi
                                        cUIjO0Dm7HwvErEr0YxeibL1StSh37STafE4I7zcBdRq1DiOkdmlTJVnkQTBTS7X1FYyvfO4piaI
                                        nKbDCDaT2anLudYXCRFsQBgAcIF2/Okwgvz5+Z4tsw118dzruvIvjhTB+HOuWy8UvovEH6beitBK
                                        xDyxm9MmISKCWrzB7bSlaqGlsf0FC0gMjzTg6GgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDIt
                                        MTNUMDg6MTk6NTYrMDA6MDCjlq7LAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTAyLTEzVDA4OjE5
                                        OjU2KzAwOjAw0ssWdwAAACh0RVh0ZGF0ZTp0aW1lc3RhbXAAMjAyMy0wMi0xM1QwODoxOTo1Nisw
                                        MDowMIXeN6gAAAAASUVORK5CYII="></image>
                                        </svg>
                                        <p class="number"> {{ formatCard(paymentForm.get('cardNumber')?.value) }} </p>
                                        <p class="date_8264" mask="00/00"> {{ paymentForm.get('cardExpiry')?.value}} </p>
                                        <p class="name"> {{ paymentForm.get('cardName')?.value.toUpperCase() }} </p>
                                    </div>
                                    <div class="flip-card-back">
                                        <div class="strip"></div>
                                        <div class="mstrip"></div>
                                        <div class="sstrip">
                                        <p class="code"> {{ paymentForm.get('cardCvv')?.value }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="textInputWrapper">
                                <label for="cardNumber">Número do cartão</label>
                                <input formControlName="cardNumber" type="text" id="cardNumber" class="textInput" placeholder="0000 0000 0000 0000" mask="0000 0000 0000 0000"
                                [class.input-error]="
                                    paymentForm.get('cardNumber')?.invalid &&
                                    paymentForm.get('cardNumber')?.touched
                                ">
                            </div>

                            <div class="textInputWrapper">
                                <label for="cardName">Nome no cartão</label>
                                <input formControlName="cardName" maxlength="37" type="text" id="cardName" class="textInput" placeholder="Nome impresso no cartão"
                                [class.input-error]="
                                    paymentForm.get('cardName')?.invalid &&
                                    paymentForm.get('cardName')?.touched
                                ">
                            </div>

                            <div class="duo-input">
                                <div class="textInputWrapper">
                                    <label for="cardExpiry">Validade</label>
                                    <input formControlName="cardExpiry" type="text" id="cardExpiry" class="textInput" placeholder="MM/AA" mask="00/00"
                                    [class.input-error]="
                                        paymentForm.get('cardExpiry')?.invalid &&
                                        paymentForm.get('cardExpiry')?.touched
                                    ">
                                </div>

                                <div class="textInputWrapper">
                                    <label for="cardCvv">CVV</label>
                                    <input formControlName="cardCvv" type="text" id="cardCvv" class="textInput" placeholder="Nome impresso no cartão" mask="000" 
                                    (focus)="isCvvFocused = true"
                                    (blur)="isCvvFocused = false"       
                                    [class.input-error]="
                                        paymentForm.get('cardCvv')?.invalid &&
                                        paymentForm.get('cardCvv')?.touched
                                    ">
                                </div>
                            </div>
        
                            <div class="input">
                                <label>Parcelas</label>
                                <select formControlName="installments">
                                <option value="1">1x sem juros</option>
                                <option value="2">2x sem juros</option>
                                <option value="3">3x sem juros</option>
                                </select>
                            </div>

                        </div>
                    }

                    </form>

            }

            <div class="checkout-btn" [class.lastStep]="currentStep === 2">
                @if (currentStep > 0) {
                    <button type="button" (click)="decreaseStep()" class="btn-base btn-roxo-sec">VOLTAR</button>
                }
                @if (currentStep < 2) {
                    <button class="btn-base btn-roxo" type="button" (click)="onNextStep()" >AVANÇAR</button>
                } @else {
                    <button class="btn-base submit" type="button" >FINALIZAR COMPRA</button>
                }
            </div>

            

        </div>
    } @else if (total <= 0 && isLogged) {
        <div class="checkout-data">
            <h2 class="text-center">
                Oops! Seu carrinho está vazio...<br>
                Escolha um produto antes de finalizar a compra.
            </h2>

                <button class="btn-base btn-roxo" [routerLink]="['/categorias']" type="button">
                    <span class="material-icons">
                        rocket_launch
                    </span>
                    EXPLORAR PRODUTOS
                </button>

            <svg class="checkout-svg" version="1.2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 752 592" width="752" height="592">
                <style>
                    .s0 { opacity: .99;fill: var(--brand-color) } 
                </style>
                <path id="Path 0" fill-rule="evenodd" class="s0" d="m40.5 4.13c2.75-0.08 17.82 1.92 33.5 4.44 15.68 2.52 30.3 5.38 32.5 6.37 2.2 0.98 5.75 3.54 7.89 5.67 2.13 2.14 4.69 5.69 5.68 7.89 1 2.2 6.79 24.7 12.89 50 6.09 25.3 11.72 48.25 12.5 51 0.79 2.75 2.61 6.13 6.7 10l581.34 1 4 2.12c2.2 1.17 5.46 3.76 7.25 5.75 1.93 2.15 3.91 5.97 4.87 9.38 1.45 5.17 1.46 6.45 0.13 12.75-0.81 3.85-5.84 23.88-11.18 44.5-5.34 20.63-13.11 50.77-17.27 67-4.16 16.23-13.14 51.33-19.94 78-6.81 26.67-17.32 67.96-23.37 91.75-6.04 23.79-11.69 44.94-12.54 47-0.85 2.06-3.21 5.49-5.25 7.61-2.03 2.12-5.72 4.82-12.7 8.14h-440.14l-5.88-3c-3.81-1.95-7.06-4.58-9.25-7.5-1.85-2.48-4.03-6.75-4.83-9.5-0.8-2.75-5.72-22.77-10.94-44.5-5.21-21.73-16.71-69.42-25.54-106-8.83-36.57-25.73-105.88-37.56-154-11.83-48.13-23.97-97.63-26.99-110-3.02-12.37-6.14-23.51-6.93-24.75-1-1.56-3.06-2.56-6.69-3.26-2.89-0.56-13.35-2.33-23.25-3.94-15.51-2.52-18.54-3.32-21.92-5.74-2.16-1.55-4.98-4.84-6.27-7.31-1.61-3.08-2.35-6.15-2.33-9.75 0.01-3.07 0.79-6.81 1.88-9 1.02-2.06 3.69-5.41 5.93-7.45 2.23-2.03 5.11-3.88 6.39-4.11 1.27-0.23 4.57-0.48 7.32-0.56zm-4.6 20.69c0.02 0.92 0.84 2.42 1.82 3.33q1.77 1.66 18.28 4.3c9.07 1.45 19.2 3.32 22.5 4.15 3.3 0.83 7.46 2.61 9.25 3.95 1.79 1.35 4.36 4.14 5.71 6.2 1.67 2.54 4.22 10.98 7.94 26.25 3.01 12.38 9.8 40.05 15.07 61.5 5.28 21.45 10.93 44.4 12.55 51 1.62 6.6 9.93 41.02 18.47 76.5 8.54 35.48 19.63 81.38 24.64 102 5 20.63 14.02 57.52 20.03 82 6 24.48 11.58 45.51 12.38 46.75 0.8 1.24 3.03 2.92 4.96 3.75 3.07 1.32 29.56 1.5 218 1.5 188.44 0 214.93-0.18 218-1.5 1.92-0.83 4.12-2.74 4.88-4.25 0.76-1.51 7.05-25.02 13.98-52.25 6.93-27.23 16.22-63.67 20.64-81 4.41-17.33 11.43-45 15.59-61.5 4.15-16.5 10.46-41.25 14.01-55 3.55-13.75 9.36-36.25 12.92-50 3.56-13.75 6.47-26.24 6.48-27.75 0-1.51-1.09-3.99-2.41-5.5l-2.42-2.75c-507.48-0.08-576.85-0.37-580.67-1.28-3.18-0.76-6.64-2.6-9.5-5.05-2.48-2.13-5.29-5.62-6.25-7.77-0.97-2.14-5.32-18.52-9.67-36.4-4.35-17.88-9.84-40.38-12.2-50-2.4-9.75-5.21-18.83-6.35-20.5-1.13-1.65-3.63-3.77-5.54-4.71-1.92-0.95-15.98-3.76-31.24-6.25-15.26-2.5-27.94-4.54-28.18-4.54-0.23 0-1.17 0.71-2.07 1.57-0.9 0.87-1.63 2.33-1.6 3.25zm65.33 169.97c0.44 0.39 10.18 38.28 21.64 84.21 11.46 45.92 23.42 94.08 26.57 107 3.16 12.92 9.77 39.92 14.69 60 4.93 20.08 8.69 36.73 8.35 37-0.33 0.27-6.21-0.06-13.04-0.75-6.84-0.69-18.4-2.42-25.69-3.85-7.29-1.43-18.65-4.4-25.25-6.59-6.6-2.19-16.95-6.44-23-9.44-6.05-3-15.28-8.32-20.5-11.84-5.23-3.51-14.4-11.03-20.39-16.71-5.99-5.67-14.1-14.59-18.02-19.82-3.92-5.23-8.97-13.1-11.23-17.5-2.26-4.4-5.27-10.92-6.69-14.5-1.42-3.58-3.8-11.67-5.3-18-2.39-10.12-2.73-13.6-2.79-29-0.06-13.54 0.35-19.53 1.81-26.5 1.04-4.95 3.44-13.5 5.34-19 1.9-5.5 5.44-13.82 7.87-18.5 2.44-4.68 7.44-12.77 11.13-18 3.69-5.23 12.13-14.9 18.77-21.5 6.63-6.6 16.32-15.05 21.53-18.79 5.21-3.73 14.85-9.45 21.44-12.71 6.58-3.25 12.32-5.6 12.76-5.21zm164.77-149.64c2.47-0.06 8.66 0.33 13.75 0.87 5.09 0.54 12.51 1.65 16.5 2.47 3.99 0.82 10.85 2.65 15.25 4.07 4.4 1.43 12.72 4.84 18.5 7.59 5.77 2.75 14.77 7.85 20 11.34 5.22 3.49 13.55 9.3 18.5 12.91 4.95 3.62 12.37 8.35 16.5 10.51 4.12 2.17 11.1 5.33 15.5 7.02 4.4 1.7 13.17 4.26 19.5 5.69 6.74 1.52 16.46 2.86 23.5 3.24 6.6 0.35 16.95 0.31 23-0.09 6.05-0.4 14.37-1.45 18.5-2.34 4.12-0.88 11.32-3.12 16-4.97 4.67-1.85 13.67-6.16 20-9.58 6.32-3.42 13.86-7.05 16.75-8.05 2.89-1.01 8.06-2.22 11.5-2.7 3.61-0.51 9.21-0.49 13.25 0.02 4.5 0.58 9.5 2.12 14 4.32 4.3 2.11 11.04 6.94 17.5 12.55 6.75 5.86 13 10.31 17.5 12.45 3.85 1.83 10.15 3.84 14 4.48 3.85 0.63 9.02 0.86 11.5 0.5 2.47-0.35 9.45-1.77 15.5-3.14 7.65-1.73 12.52-2.32 16-1.92 2.75 0.31 7.02 1.24 9.5 2.06 2.47 0.82 6.52 3.22 9 5.33 2.47 2.12 5.51 5.85 6.74 8.29 1.23 2.43 2.24 4.99 2.25 5.68 0.01 1-52.65 1.25-519.99 1.25l-1.09-2.75c-0.6-1.51-1.15-6.57-1.22-11.25-0.06-4.68 0.47-10.98 1.18-14 0.72-3.02 3.4-9.76 5.97-14.97 3.53-7.18 6.47-11.38 12.16-17.37 4.12-4.34 10.65-9.96 14.5-12.49 3.85-2.54 10.37-6.01 14.5-7.73 4.12-1.72 11.32-4.09 16-5.28 4.67-1.18 11.87-2.55 16-3.03 4.12-0.48 9.52-0.92 12-0.98zm441.25 340.82c0.69-0.01 4.62 1.66 8.75 3.72 4.5 2.25 10.1 6.2 14 9.88 4.49 4.24 7.56 8.27 9.92 13.03 2.61 5.26 3.54 8.57 3.9 13.9 0.35 5.28-0.05 8.72-1.63 14-1.16 3.85-3.59 9.48-5.4 12.5-1.82 3.03-5.1 7.72-7.29 10.42-2.2 2.71-7.38 7.82-11.5 11.35-5.11 4.38-11.01 8.12-18.5 11.73-6.05 2.92-13.25 5.81-16 6.42-2.75 0.62-5.09 1-5.2 0.85-0.11-0.15 6.08-24.35 13.74-53.77 7.67-29.42 13.95-53.61 13.95-53.75 0.01-0.14 0.57-0.26 1.26-0.28zm-456.25 133.29c5.43 0.21 9.02 0.99 13 2.81 3.02 1.39 7.67 4.53 10.33 6.98 2.66 2.45 6.03 6.93 7.5 9.95 2.33 4.8 2.67 6.7 2.64 15-0.03 8.51-0.35 10.12-3 15.39-1.81 3.59-5.12 7.82-8.47 10.82-3.22 2.89-7.78 5.77-11 6.96-4.44 1.63-7.23 1.94-14.5 1.61-6.95-0.32-10.03-0.95-13.5-2.76-2.48-1.29-6.53-4.24-9-6.55-2.64-2.47-5.74-6.84-7.5-10.59-2.58-5.51-2.99-7.53-3-14.88 0-7.07 0.44-9.43 2.59-14 1.42-3.02 3.73-6.85 5.11-8.5 1.39-1.65 4.47-4.35 6.86-6 2.38-1.65 6.6-3.8 9.38-4.77 3.54-1.23 7.32-1.68 12.56-1.47zm-16.11 24.87c-1.26 1.86-2.49 5.4-2.72 7.87-0.24 2.48 0.05 6.08 0.64 8 0.59 1.92 2.68 4.96 4.63 6.75 1.96 1.79 5.47 3.74 7.81 4.33 2.34 0.6 5.82 0.79 7.75 0.42 1.92-0.37 5.02-1.64 6.88-2.83 1.86-1.2 4.3-3.75 5.43-5.67 1.35-2.3 2.04-5.21 2.02-8.5-0.02-2.75-0.73-6.35-1.58-8-0.85-1.65-2.38-3.73-3.4-4.63-1.02-0.9-3.31-2.36-5.1-3.25-1.79-0.89-5.16-1.61-7.5-1.6-2.34 0.01-6.12 0.86-8.41 1.89-2.29 1.02-5.19 3.37-6.45 5.22zm369.11-24.79c5.55 0.24 8.93 1.01 13 2.96 3.02 1.45 7.07 3.93 9 5.51 1.92 1.59 4.95 5.54 6.73 8.79 1.77 3.24 3.68 8.6 4.25 11.9 0.7 4.1 0.7 7.74 0 11.5-0.57 3.03-1.9 7.3-2.95 9.5-1.06 2.2-4.09 6.19-6.73 8.88-2.64 2.68-7.05 6.05-9.8 7.49-4.41 2.3-6.17 2.61-15 2.62-8.7 0.01-10.71-0.33-15.5-2.59-3.03-1.43-7.41-4.46-9.75-6.75-2.34-2.28-5.49-6.51-7-9.4-2.46-4.71-2.75-6.28-2.75-15.25 0-8.32 0.39-10.84 2.3-15 1.26-2.75 3.96-6.72 6-8.83 2.03-2.11 5.72-5.02 8.2-6.46 2.47-1.44 6.3-3.2 8.5-3.91 2.3-0.74 7.19-1.15 11.5-0.96zm-13.85 21.97c-1.28 1.2-3.04 3.54-3.89 5.19-0.86 1.65-1.57 5.25-1.59 8-0.02 3.29 0.67 6.2 2.02 8.5 1.13 1.92 3.57 4.49 5.43 5.69 1.86 1.2 5.18 2.5 7.38 2.87 2.47 0.42 5.53 0.18 8-0.64 2.2-0.73 5.31-2.48 6.92-3.88 1.6-1.39 3.51-4 4.25-5.79 0.73-1.79 1.33-4.94 1.34-7 0-2.06-1.01-5.76-2.25-8.21-1.64-3.23-3.5-5.09-6.76-6.77-2.88-1.48-6.12-2.28-9-2.23-2.48 0.05-5.63 0.54-7 1.08-1.38 0.55-3.56 1.99-4.85 3.19zm-203.15-276.05c4.41 0.18 8.94 1.01 11 2.01 1.92 0.94 5.26 3.4 7.41 5.47 2.15 2.07 4.82 5.79 5.94 8.26 1.24 2.74 2.04 6.65 2.05 10 0.02 3.03-0.5 7.3-1.15 9.5-0.64 2.2-2.87 5.96-4.96 8.35-2.15 2.47-6.17 5.47-9.29 6.94-4.2 1.97-7.04 2.58-12 2.55-4.22-0.02-8.08-0.73-11-2.01-2.48-1.09-6.22-3.52-8.33-5.4-2.1-1.89-4.69-5.23-5.73-7.43-1.33-2.78-1.92-6.21-1.93-11.25-0.01-5.7 0.51-8.27 2.4-12 1.33-2.61 3.91-6.19 5.75-7.94 1.84-1.76 5.36-4.14 7.84-5.28 3.58-1.66 6.03-2.02 12-1.77zm199-0.2c3.02-0.05 7.08 0.44 9 1.09 1.92 0.65 5.19 2.23 7.25 3.52 2.06 1.28 5.1 4.47 6.76 7.08 1.65 2.61 3.52 7 4.15 9.75 0.96 4.13 0.87 6.12-0.5 11.5-1.17 4.55-2.79 7.81-5.41 10.85-2.06 2.39-6 5.45-8.75 6.8-3.78 1.85-6.71 2.47-12 2.53-4.49 0.05-8.44-0.53-11-1.61-2.2-0.93-5.46-2.79-7.25-4.13-1.79-1.34-4.46-4.58-5.93-7.19q-2.68-4.75-3.14-10.75c-0.32-4.17 0.1-7.68 1.36-11.5 1.24-3.75 3.27-6.95 6.39-10.07 2.59-2.59 6.52-5.27 9.07-6.17 2.47-0.88 6.97-1.65 10-1.7zm-232 51.91c3.02-0.01 7.07 0.61 9 1.39 1.92 0.77 4.88 2.92 6.56 4.77 1.68 1.86 3.37 5.06 3.75 7.12 0.43 2.35 0.2 4.96-0.63 7-0.73 1.79-2.41 4.32-3.75 5.62-1.34 1.3-4.01 3.03-5.93 3.84-1.93 0.82-5.98 1.48-9 1.47-3.03-0.01-7.08-0.67-9-1.47-1.93-0.81-4.85-2.9-6.5-4.67-2.38-2.53-3.07-4.27-3.34-8.37-0.27-4.13 0.13-5.87 2.01-8.67 1.29-1.92 4.37-4.52 6.84-5.76 3.01-1.51 6.3-2.26 9.99-2.27zm264.5 0.09c4.39-0.02 7.06 0.57 9.96 2.21 2.17 1.22 5 3.81 6.27 5.73 1.46 2.2 2.33 4.99 2.33 7.5 0 2.51-0.87 5.3-2.33 7.5-1.27 1.93-4.1 4.51-6.27 5.73-2.91 1.65-5.61 2.24-10.21 2.25-3.44 0.01-7.49-0.46-9-1.04-1.51-0.59-4.22-2.5-6.02-4.25-1.8-1.76-3.74-4.54-4.3-6.19-0.7-2.04-0.71-4.29-0.02-7 0.55-2.2 2.26-5.21 3.8-6.69 1.53-1.49 4.37-3.38 6.29-4.22 1.92-0.83 6.2-1.52 9.5-1.53zm-131.75 1.93c34.25 0.01 34.25 0.01 36.27 2.26 1.11 1.24 2.01 2.81 2 3.5-0.01 0.69-0.54 2.26-1.17 3.5-0.63 1.24-1.64 2.58-2.25 2.98-0.6 0.41-16.4 0.75-35.1 0.76-28.67 0.02-34.35-0.21-36.25-1.48-1.54-1.04-2.29-2.59-2.38-4.95-0.11-2.62 0.44-3.82 2.25-5.01 2.04-1.34 7.23-1.56 36.63-1.56z"/>
            </svg>
            
            
        </div>     
    } @else {
        <div class="checkout-data">
            <h2>Você não está logado.</h2>
            <button class="btn-base btn-roxo" [routerLink]="['/login']" type="button">
                <span class="material-icons">
                    login
                </span>
                LOGAR
            </button>
        </div>
    }
</div>